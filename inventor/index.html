<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <title>Quando Inventor</title>
    <link href="/editor/css/bootstrap.min.css" rel="stylesheet">
    <link href="/editor/css/bootstrap-theme.min.css" rel="stylesheet">

    <link href="/editor/bootstrap.css" rel="stylesheet" type="text/css"/>
    <link href="/editor/css/index.css" rel="stylesheet" type="text/css"/>
    <link href="index.css" rel="stylesheet" type="text/css"/>
    <link href="/editor/css/toastr.min.css" rel="stylesheet"/>
    <link href="dragula.css" rel="stylesheet"/>
</head>
<body role="document">
    <nav id="nav_bar" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#editor_navbar_collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <h3 class="navbar-text">
                    <span><img src="/editor/resources/favicon.ico"/></span>
                    Quando Inventor :
                    <span id='file_name' class="navbar-textlabel">[no file]</span>
                    <span id='top_status' class="label label-success">Guest</span>
                </h3>
            </div>
        </div><!-- /.container-fluid -->
        </div><!-- /.container-fluid -->
    </nav>
    <div id="editor_content" data-role="content">
        <div class="row container-fluid">
            <span id="_hidden_width_element_"></span> <!-- used to calculate width of input text elements -->
            <div id="menu" class="container col-md-2">
                <div class="quando-title quando-inventor">Inventor</div>
                <div class="quando-block" data-quando-block-type="inventor_block"
                data-quando-javascript="${_quando_inventor_1}${_quando_inventor_2}${_quando_inventor_3}${_quando_inventor_box_}</div>${}</div>${}">
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            <input data-quando-name="_quando_inventor_1" type="hidden" data-quando-encode="raw"
                                value='<div class="quando-block" data-quando-block-type="${_quando_inventor_type_}" data-quando-javascript="${_quando_inventor_javascript_}">${}'/>
                            <input data-quando-name="_quando_inventor_2" type="hidden" data-quando-encode="raw"
                                value='<div class="quando-left ${class}"></div>${}'/>
                            <input data-quando-name="_quando_inventor_3" type="hidden" data-quando-encode="raw"
                                value='<div class="quando-right">${}'/>
                            Block Type <input data-quando-name="_quando_inventor_type_" type="text" data-quando-encode="raw"
                                value="" title = "Type"/>
                            Javascript <input data-quando-name="_quando_inventor_javascript_" type="text" data-quando-encode="raw"
                                value="" title = "Javascript"/>
                        </div>
                        <div data-quando-name="_quando_inventor_box_" class="quando-box"></div>
                        <div class="quando-row quando-inventor">
                            Class
                            <select data-quando-name="class">
                                <option value="quando-inventor">Inventor</option>
                                <option value="quando-media">Media</option>
                                <option value="quando-display">Display</option>
                                <option value="quando-time">Time</option>
                                <option value="quando-advanced">Advanced</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="inventor_row"
                    data-quando-javascript='<div class="quando-row ${class}">${}${_quando_inventor_box_}</div>'/>
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            Row
                        </div>
                        <div data-quando-name="_quando_inventor_box_" class="quando-box"></div>
                        <div class="quando-row quando-inventor"></div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="inventor_text" data-quando-javascript='${text}'>
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            Text <input data-quando-name="text" type="text" value=""/>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="inventor_input"
                    data-quando-javascript='<input data-quando-name="${input}" type="text" value="${default}" data-quando-encode="${encode}"/>'>
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            Input <input data-quando-name="input" title="Name" type="text" value=""/>
                            Default <input data-quando-name="default" title="value" type="text" value=""/>
                            <span>
                                <select data-quando-name="show_hide" class="quando-toggle" disabled="true">
                                    <option value="show">...</option>
                                    <option value="hide">▲</option>
                                </select>
                                <!-- <span onclick="index.handleShowHide()" data-quando-action="click">▼</span> -->
                                <select data-quando-toggle="hide" data-quando-name="encode">
                                    <option value="">Encode</option>
                                    <option value="raw">Raw</option>
                                </select>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="inventor_menu"
                    data-quando-javascript='<select data-quando-name="${name}">${}${box}</select>'>
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            Menu
                            <input data-quando-name="name" type="text" value=""/>
                        </div>
                        <div data-quando-name="box" class="quando-box"></div>
                        <div class="quando-row quando-inventor"></div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="inventor_choice" data-quando-javascript="<option value='${value}'>${choice}</option>">
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            Choice <input data-quando-name="choice" type="text" value=""/>
                            value <input data-quando-name="value" type="text" value=""/>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="inventor_box"
                    data-quando-javascript='<div data-quando-name="${name}" class="quando-box"></div>'>
                    <div class="quando-left quando-inventor"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-inventor">
                            Box <input data-quando-name="name" title="Title" type="text" value="box"/>
                        </div>
                    </div>
                </div>
                <!-- Icons from https://icons8.com/icon/set/alarm/material -->
                <div class="quando-title quando-media">Media</div>
                <div class="quando-block" data-quando-block-type="media_title"
                    data-quando-javascript="quando.title('${text}', ${append})">
                    <div class="quando-left quando-media"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-media">
                            <img src="img/icons8-abc-24.png"/>
                            <select data-quando-name="append">
                                <option value="false">Show</option>
                                <option value="true">Add</option>
                            </select>
                            Title <input data-quando-name="text" type="text" value=""/>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="media_text"
                    data-quando-javascript="quando.text('${text}', ${append})">
                    <div class="quando-left quando-media"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-media">
                            <img src="img/icons8-abc-24.png"/>
                            <select data-quando-name="append">
                                <option value="false">Show</option>
                                <option value="true">Add</option>
                            </select>
                            Text <input data-quando-name="text" type="text" value=""/>
                        </div>
                    </div>
                </div>
                <div class="quando-title quando-display">Display</div>
                <div class="quando-block" data-quando-block-type="display_when_display" data-quando-id="true"
                    data-quando-javascript="quando.display('${data-quando-id}',()=>{${}quando.title('${name}')${}${box}})">
                    <div class="quando-left quando-separator quando-display"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-separator quando-display">
                            When Display <input data-quando-name="name" type="text" value="" data-quando-list="display"/>
                        </div>
                        <div data-quando-name="box" class="quando-box"></div>
                        <div class="quando-row quando-display">
                    </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="display_when_label"
                    data-quando-javascript="quando.addLabelStatement('${text}', ()=>{${}${box}})">
                    <div class="quando-left quando-display"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-display">
                            When Label <input data-quando-name="text" type="text" value=""/>
                        </div>
                        <div data-quando-name="box" class="quando-box"></div>
                        <div class="quando-row quando-display"></div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="display_show_display"
                    data-quando-javascript="quando.showDisplay('${display_id}')">
                    <div class="quando-left quando-display"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-display">
                            Show Display
                            <select data-quando-name='display_id' data-quando-list="display">
                                <option value='-1'>----</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="display_projection"
                    data-quando-javascript="quando.projection(${front})">
                    <div class="quando-left quando-display"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-display">
                            📺
                            <select data-quando-name="front">
                                <option value='true'>Normal</option>
                                <option value='false'>Rear</option>
                            </select>
                            Projection
                        </div>
                    </div>
                </div>
                <div class="quando-title quando-time">Time</div>
                <div class="quando-block" data-quando-block-type="time_after"
                    data-quando-javascript="quando.after(${count}, '${units}', ${destructor}, ()=>{${}${box}})">
                    <div class="quando-left quando-time"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-time">
                            <img src="img/icons8-alarm-clock-24.png"/> After
                            <input data-quando-name="count" type="number" min="0" max="99" maxLength="2" value="1" style="width: 4em" />
                            <select data-quando-name="units">
                                <option value="seconds">Seconds</option>
                                <option value="minutes">Minutes</option>
                                <option value="hours">Hours</option>
                            </select>
                            <input data-quando-name="destructor" type="hidden" value="false"/>
                        </div>
                        <div data-quando-name="box" class="quando-box"></div>
                        <div class="quando-row quando-time"></div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="time_every"
                    data-quando-javascript="quando.every(${count}, '${units}', ${destructor}, ()=>{${}${box}})">
                    <div class="quando-left quando-time"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-time">
                            <img src="img/icons8-alarm-clock-24.png"/> Every
                            <input data-quando-name="count" type="number" min="0" max="99" maxLength="2" value="1" style="width: 4em" />
                            <select data-quando-name="units">
                                <option value="seconds">Seconds</option>
                                <option value="minutes">Minutes</option>
                                <option value="hours">Hours</option>
                            </select>
                            <input data-quando-name="destructor" type="hidden" value="false"/>
                        </div>
                        <div data-quando-name="box" class="quando-box"></div>
                        <div class="quando-row quando-time"></div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="time_per"
                    data-quando-javascript="quando.check(${count}, '${units}', ${destructor}, ()=>{${}${box}})">
                    <div class="quando-left quando-time"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-time">
                            <img src="img/icons8-alarm-clock-24.png"/>
                            <input data-quando-name="count" type="number" min="0" max="99" maxLength="2" value="1" style="width: 4em" />
                            times per
                            <select data-quando-name="units">
                                <option value="second">Second</option>
                                <option value="minute">Minute</option>
                                <option value="hour">Hour</option>
                                <option value="day">Day</option>
                            </select>
                            <input data-quando-name="destructor" type="hidden" value="false"/>
                        </div>
                        <div data-quando-name="box" class="quando-box"></div>
                        <div class="quando-row quando-time"></div>
                    </div>
                </div>
                <div class="quando-title quando-advanced">Advanced</div>
                <div class="quando-block" data-quando-block-type="advanced_javascript" data-quando-javascript="${javascript}">
                    <div class="quando-left quando-advanced"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-advanced">
                            Javascript <input data-quando-name="javascript" type="text" value="" data-quando-encode="raw"/>
                        </div>
                    </div>
                </div>
                <div class="quando-block" data-quando-block-type="advanced_say" data-quando-javascript="alert('${txt}')">
                    <div class="quando-left quando-advanced"></div>
                    <div class="quando-right">
                        <div class="quando-row quando-advanced">
                            Say <input data-quando-name="txt" type="text" value=""/>
                        </div>
                    </div>
                </div>
            </div>
            <div id="script" class="col-md-10"></div>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-default navbar-fixed-bottom">
        <div class="container-fluid">
            <div class="navbar-footer">
                <div>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#login_modal">
                            Login
                        </button>
                    </div>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-primary" onclick="index.handle_load();">
                            <span class="glyphicon glyphicon-floppy-open"></span> Load
                        </button>
                        <button type="button" class="btn btn-primary" onclick="index.handle_save();">
                            <span class="glyphicon glyphicon-floppy-save"></span> Save
                        </button>
                        <button type="button" class="btn btn-warning" onclick="index.handle_clear();">
                            <span class="glyphicon glyphicon-remove-sign"></span> Clear
                        </button>
                    </div>
                    <input id="upload_media" class="hidden" type="file" multiple="multiple"
                        onchange="index.handle_upload_media();"/>
                    <div class="btn-group" role="group">
                        <label for="upload_media" type="button" class="btn btn-primary">
                            <span class="glyphicon glyphicon-floppy-open"></span> Upload Media
                        </label>
                    </div>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-primary" onclick="index.handle_test();">
                            <span class="glyphicon glyphicon-eye-open"></span> Test
                        </button>
                        <button type="button" class="btn btn-primary" onclick="index.handle_deploy();">
                            <span class="glyphicon glyphicon-briefcase"></span> Deploy
                        </button>
                        <button type="button" class="btn btn-warning" onclick="index.handle_show_code();">
                            <span class="glyphicon glyphicon-eye-open"></span> Code
                        </button>
                    </div>
                    <button type="button" class="btn btn-warning" onclick="index.handle_logout();">
                        Logout
                    </button>
                    <span id='status_message' class="label label-default"></span>
                </div>
            </div>
        </div>
    </nav>
    <div class="modal fade" id="login_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Login</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="userid">User Id</label>
                        <input type="text" class="form-control" id="userid">
                    </div>
                    <div class="form-group">
                        <label for="pwd">Password</label>
                        <input type="password" class="form-control" id="password">
                    </div>
                </div>
                <div class="modal-footer">
                    <label id="login_modal_footer_message"></label>
                    <button type="button" class="btn btn-primary" onclick="index.handle_login()">Login</button>
                    <button type="button" class="btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="loading_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Loading...</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label id="loading_modal_message">Please wait...</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="processForm()">Retry</button>
                    <button type="button" class="btn"
                            data-dismiss="modal" onclick="$('#logged_in_status').html('Guest');">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="remote_load_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span>&times;</span></button>
                    <h4 class="modal-title">Load from Server</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <div class="col-xs-3" align="right">
                            <label for="remote_load_show_versions">Show Versions:</label>
                        </div>
                        <div class="col-xs-3">
                            <select class="form-control" id="remote_load_show_versions"
                                    onchange='index.handle_show_version()'>
                                <option value='false'>Latest</option>
                                <option value='true'>All</option>
                            </select>
                        </div>
                        <div class="col-xs-3"> </div>
                        <div class="col-md-3">
                            Delete
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="list-group" id="remote_load_list">
                        </div>
                    </div>
                </div>
                <div class="modal-footer" data-position="fixed">
                    <button type="button" class="btn btn-primary" onclick='index.handle_remote_to_local_load()'>Browser Files</button>
                    <button type="button" class="btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="local_load_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Load from Browser</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="list-group" id="local_load_list">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="local_save_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Save</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Save to local/browser storage</label>
                    </div>
                    <div class="form-group">
                        <label for="local_save_key">Key</label>
                        <input type="text" class="form-control" id="local_save_key">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick='index.handle_local_save()'>Save</button>
                    <button type="button" class="btn" onclick='' data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="remote_save_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Save</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Save to remote storage</label>
                    </div>
                    <div class="form-group">
                        <label for="remote_save_key">Key</label>
                        <input type="text" class="form-control" id="remote_save_key">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick='index.handle_remote_save()'>Save</button>
                    <button type="button" class="btn btn-primary" onclick='index.handle_remote_to_local_save()'>Browser Files</button>
                    <button type="button" class="btn" onclick='' data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="show_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="show_modal_title"></h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <figure class="highlight">
                            <pre><code id="show_modal_code" class="language-html" data-lang="html">Code</code></pre>
                        </figure>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="file_modal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title file_modal_select_file">Select File</h4>
                    <h4 class="modal-title file_modal_upload">Select Folder for Upload</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="file_modal_select_file">Remote files</label>
                        <label class="file_modal_upload">Remote folder: </label>
                        <span id="file_modal_path"></span>
                    </div>
                    <div class="form-group">
                        <div class="list-group" id="file_list">
                            
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn file_modal_upload"
                        onclick="index.handle_upload();">Upload</button>
                    <button type="button" class="btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/editor/js/jquery-2.2.0.js"></script>
    <script src="/editor/js/bootstrap.min.js"></script>
    <script src="/editor/js/bootbox.min.js"></script>
    <script src="/editor/js/toastr.min.js"></script>
    <script src="/editor/js/notify.min.js" type="text/javascript"></script>
    <script src="dragula.js" type="text/javascript"></script>
    <script src="index.js" type="text/javascript"></script>
</body>